<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scouting Badges Directory</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }
  .container { max-width: 1200px; margin: auto; overflow: hidden; }
  header { background: #333; color: #fff; padding-top: 30px; min-height: 70px; border-bottom: #e8491d 3px solid; }
  header a { color: #fff; text-decoration: none; text-transform: uppercase; font-size: 16px; }
  header ul { padding: 0; list-style: none; }
  header li { display: inline; padding: 0 20px 0 20px; }
  header #branding { float: left; }
  header #branding h1 { margin: 0; }
  header nav { float: right; margin-top: 10px; }
  header .highlight, header .current a { color: #e8491d; font-weight: bold; }
  header a:hover { color: #ffffff; font-weight: bold; }
  table { width: 100%; border-collapse: collapse; margin: 25px 0; }
  table, th, td { border: 1px solid #ddd; }
  th, td { padding: 10px; text-align: left; }
  th { background-color: #333; color: white; }
  tr:nth-child(even) { background-color: #f2f2f2; }
  footer { padding: 20px; margin-top: 20px; color: #ffffff; background-color: #333; text-align: center; }
  .hidden { display: none; }
</style>
</head>
<body>
  <header>
    <div class="container">
      <div id="branding">
        <h1><span class="highlight">Scouting</span> Badges Directory</h1>
      </div>
      <nav>
        <ul>
          <li class="current"><a href="index.html">Home</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="container">
    <table id="badgesTable">
      <thead>
        <tr>
          <th>Image</th>
          <th>Name</th>
          <th>Description</th>
          <th>Date of Acquisition</th>
          <th>Date of Removal</th>
        </tr>
      </thead>
      <tbody>
        <!-- Table rows will be added here dynamically -->
      </tbody>
    </table>
    <button onclick="showAddBadgeForm()">Add New Badge</button>
    <div id="addBadgeForm" class="hidden">
      <h3>Add New Badge</h3>
      <label for="imageUrl">Image URL:</label>
      <input type="text" id="imageUrl"><br>
      <label for="name">Name:</label>
      <input type="text" id="name"><br>
      <label for="description">Description:</label>
      <input type="text" id="description"><br>
      <label for="dateOfAcquisition">Date of Acquisition:</label>
      <input type="date" id="dateOfAcquisition"><br>
      <label for="dateOfRemoval">Date of Removal:</label>
      <input type="date" id="dateOfRemoval"><br>
      <label for="password">Password:</label>
      <input type="password" id="password"><br>
      <button onclick="addBadge()">Submit</button>
    </div>
  </section>

  <footer>
    <p>Scouting Badges Directory Â© 2024</p>
  </footer>

  <script>
    const scriptUrl = 'https://script.google.com/macros/s/AKfycbwZKn2WBSW1BB5MjgF72UJXD4dyvGeRaQNkonfzRnBonRoWpYD4PuJqB6Acv9IlGcd9AQ/exec'; // Replace with your actual web app URL


    function fetchBadges() {
      fetch(scriptUrl + '?action=get')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'success') {
            populateTable(data.badges);
          } else {
            console.error('Failed to fetch badges:', data.message);
          }
        })
        .catch(error => console.error('Error:', error));
    }

    function populateTable(badges) {
      const tableBody = document.getElementById('badgesTable').getElementsByTagName('tbody')[0];
      tableBody.innerHTML = ''; // Clear existing rows
      badges.forEach(badge => {
        let row = tableBody.insertRow();
        row.insertCell(0).innerHTML = `<img src="${badge.imageUrl}" alt="Badge Image" style="width:50px;height:50px;">`;
        row.insertCell(1).textContent = badge.name;
        row.insertCell(2).textContent = badge.description;
        row.insertCell(3).textContent = badge.dateOfAcquisition;
        row.insertCell(4).textContent = badge.dateOfRemoval;
      });
    }

    function showAddBadgeForm() {
      document.getElementById('addBadgeForm').classList.remove('hidden');
    }

    function addBadge() {
      const imageUrl = document.getElementById('imageUrl').value;
      const name = document.getElementById('name').value;
      const description = document.getElementById('description').value;
      const dateOfAcquisition = document.getElementById('dateOfAcquisition').value;
      const dateOfRemoval = document.getElementById('dateOfRemoval').value;
      const password = document.getElementById('password').value;

      if (password !== 'your_password') { // Replace 'your_password' with your actual password
        alert('Incorrect password');
        return;
      }

      const newBadge = {
        imageUrl,
        name,
        description,
        dateOfAcquisition,
        dateOfRemoval
      };

      fetch(scriptUrl + '?action=add', {
        method: 'POST',
        body: JSON.stringify(newBadge),
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success') {
          alert('Badge added successfully');
          fetchBadges();
        } else {
          alert('Failed to add badge:', data.message);
        }
      })
      .catch(error => console.error('Error:', error));
    }

    window.onload = fetchBadges;
  </script>
</body>
</html>
